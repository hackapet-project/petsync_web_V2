<main class="forgot-password-container" role="main">
  <!-- Left side - Purple background with branding (desktop only) -->
  <section class="brand-section left-panel" aria-label="Información de la aplicación">
    <header class="logo-section">
      <h1 class="app-title">PetSync</h1>
      <aside>
        <small>by</small>
        <figure>
          <img src="/logo-hackapet.svg" alt="Hackapet Logo" class="logo">
        </figure>
      </aside>
    </header>
    <article class="description">
      <h2>Gestión profesional para refugios de animales</h2>
      <p>Simplifica la administración de tu refugio con nuestra plataforma integral</p>
    </article>
  </section>

  <!-- Right side - Forgot password form -->
  <section class="form-section right-panel" aria-label="Formulario de recuperación de contraseña">
    <article class="form-container">
      <!-- Mobile Logo (hidden on desktop) -->
      <header class="mobile-logo-header">
        <svg class="logo-icon" width="48" height="48" viewBox="0 0 24 24" fill="none">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="#6366f1"/>
        </svg>
        <h1 class="mobile-app-title">RefuPet</h1>
      </header>

      <header class="form-header">
        <h1 id="forgot-password-title">¿Olvidaste tu contraseña?</h1>
        <p>Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña</p>
      </header>

      <!-- Success Message -->
      @if (emailSent()) {
        <div class="success-banner" role="alert" aria-live="polite">
          <div class="success-content">
            <svg class="success-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div>
              <h4>Email enviado</h4>
              <p>Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña</p>
            </div>
          </div>
        </div>
      }

      <!-- Error Display -->
      @if (error()) {
        <div class="error-banner" role="alert" aria-live="assertive">
          <div class="error-content">
            <svg class="error-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div>
              <h4>Error</h4>
              <p>{{ error() }}</p>
            </div>
            <button type="button" class="error-close" (click)="clearError()" aria-label="Cerrar error">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>
      }

      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form" aria-labelledby="forgot-password-title" novalidate>
        <fieldset class="form-group">
          <label for="email">Correo electrónico</label>
          <div class="input-wrapper">
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="tu@ejemplo.com"
              [class.error]="getFieldError('email')"
              autocomplete="email"
              tabindex="1"
              [attr.aria-describedby]="getFieldError('email') ? 'email-error' : 'email-help'"
              [attr.aria-invalid]="getFieldError('email') ? 'true' : 'false'"
              aria-required="true"
              spellcheck="false"
            >
            <span class="input-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z" fill="currentColor"/>
              </svg>
            </span>
          </div>
          @if (getFieldError('email')) {
            <small class="error error-message" id="email-error" role="alert">{{ getFieldError('email') }}</small>
          } @else {
            <small class="help-text" id="email-help">Ingresa el correo electrónico asociado a tu cuenta</small>
          }
        </fieldset>

        <button
          type="submit"
          class="submit-button"
          [disabled]="forgotPasswordForm.invalid || isLoading()"
          tabindex="2"
        >
          @if (isLoading()) {
            <span class="spinner" aria-hidden="true"></span>
            <span>Enviando...</span>
          } @else {
            Enviar enlace de recuperación
          }
        </button>

        <footer class="back-to-login">
          <a routerLink="/login" class="back-link" tabindex="3">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Volver al inicio de sesión
          </a>
        </footer>
      </form>
    </article>
  </section>
</main>